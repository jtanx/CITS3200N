{% extends "mg-base.html" %}

{% block main %}
<div class="page-header-norule">
  <h1>
    <a href="{% url 'manager:user_list' %}">Users</a>/{{object.username}}
  </h1>
  <ul class="nav nav-tabs">
    <li><a href="{% url 'manager:user_list' %}">Back</a></li>
    <li class="pull-right">
      <form role="form" method="post" action="{% url 'manager:user_delete' pk=object.id %}">
        {% csrf_token %}
        <input class="btn btn-danger" type="submit" value="Delete user">
      </form>
    </li>
  </ul>
</div>

<form class="form-horizontal" role="form" method="post" action="{% url 'manager:user_detail' pk=object.id %}">
    {% csrf_token %}
      {# Include the hidden fields #}
      {% for hidden in form.hidden_fields %}
      {{ hidden }}
      {% endfor %}
      {# Include the visible fields #}
      {% for field in form.visible_fields %}
          <div class="form-group">
              <label for="{{ field.auto_id }}" class="col-sm-2 control-label">
                {{ field.label }}
              </label>
              <div class="col-sm-8">
                {{ field }}
              </div>
              {% for error in field.errors %}
              
              <div class="col-danger" role="alert">{{ error|escape }}</div>
              {% endfor %}
          </div>
    {% endfor %}
    
    <div class="form-group">
      <input class="col-sm-offset-2 btn btn-default" type="submit" value="Update">
    </div>
    
    <div id="result">
      {% if form.non_field_errors %}
      <div class="alert alert-warning" role="alert">
        {{ form.non_field_errors }}
      </div>
      {% endif %}
      
      {% if result %}
      <div class="alert alert-danger" role="alert">
        {{ result }}
      </div>
      {% endif %}
    </div>
</form>
{% endblock %}
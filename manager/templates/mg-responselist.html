{% extends "mg-base.html" %}
{% with paginate_view='manager:surveylist' %}

{% block main %}
<div class="page-header clearfix">
<h1 class="pull-left">{{survey.name}} responses
<div class="btn-group">
  <button type="button" class="btn btn-default" data-toggle="dropdown">
    Data
  </button>
  <!--<a class="btn btn-default" href="#">Data</a>-->
  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
    <span class="sr-only">Toggle Dropdown</span>
  </button>
  <ul class="dropdown-menu" role="menu">
    <li><a href="{% url 'manager:export_all' pk=survey.pk %}">Export all</a></li>
    <li><a href="#">Export selected</a></li>
    <li class="divider"></li>
    <li><a href="#">Delete all</a></li>
  </ul>
</div>
</h1>
<div class="pull-right right-group">
<h4 class="pull-right right-group">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</h4>
</div>
</div>
{% if users %}

<div class="table-responsive">
  {% include 'mg-paginate.html' %}
  <table class="table table-hover">
    <thead>
      <tr>
        <th>User ID</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Responses</th>
        <th>Last response</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>
          <a href="{% url 'manager:user_detail' pk=user.id %}">
          {{user.id}}
          </a>
        </td>
        <td>{{user.first_name}}</td>
        <td>{{user.last_name}}</td>
        <td>{{user.survey_count}}</td>
        <td>{{user.last_survey}}</td>
        <td><a href="#"><span class="glyphicon glyphicon-search"></span></a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% include 'mg-paginate.html' %}
</div>
{% else %}
<p>There are no responses.</p>
{% endif %}

{% endblock %}

{% endwith %}